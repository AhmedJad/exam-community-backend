"use strict";(self.webpackChunkexam_ui=self.webpackChunkexam_ui||[]).push([[941],{6941:(te,g,l)=>{l.r(g),l.d(g,{ExamSolutionModule:()=>ee});var u=l(8583),e=l(639),f=l(9075),_=l(72),C=l(3502);function v(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li",3),e.NdJ("click",function(o){e.CHM(t);const c=e.oxw().$implicit;return e.oxw().onActionSelected(o,c.id)}),e._UZ(1,"i",4),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Tol(t.icon)}}function E(n,s){if(1&n&&(e.ynx(0),e.YNc(1,v,2,2,"li",2),e.BQk()),2&n){const t=s.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.actionVisible(t))}}let A=(()=>{class n{constructor(){this.selectedExam=null,this.examListHidden=!1,this.onSelectAction=new e.vpe,this.actions=[{id:"show-answer",icon:"fas fa-eye",requiredSelection:!0,visible:!1},{id:"hide-answer",icon:"fas fa-eye-slash",requiredSelection:!0,visible:!1},{id:"save",icon:"fa-regular fa-save",requiredSelection:!0,visible:!1},{id:"enter",icon:"fas fa-arrow-right",requiredSelection:!0,visible:!0},{id:"back",icon:"fas fa-arrow-left",requiredSelection:!1,visible:!0}]}ngOnInit(){}onActionSelected(t,i){if(t.stopPropagation(),"enter"==i&&this.selectedExam&&!this.selectedExam.folder){let o=["back"];this.selectedExam.exercise&&this.selectedExam.answer_shown&&o.push("show-answer"),(!this.selectedExam.exercise&&!this.selectedExam.exam_solutions&&this.examAvailable()||this.selectedExam.exercise)&&o.push("save"),this.makeAllActionsExcept(!1,o)}else"show-answer"==i?(this.actions[0].visible=!1,this.actions[1].visible=!0):"hide-answer"==i?(this.actions[0].visible=!0,this.actions[1].visible=!1):"back"==i&&this.examListHidden?this.makeAllActionsExcept(!0,["show-answer","hide-answer","save"]):"save"==i&&(this.actions[0].visible=!1,this.actions[1].visible=!1);this.onSelectAction.emit(i)}actionVisible(t){return t.visible&&(!t.requiredSelection||this.selectedExam)}makeAllActionsExcept(t,i){this.actions.forEach(o=>{o.visible=this.actionsIncludes(i,o)?!t:t})}actionsIncludes(t,i){let o=0;return t.forEach(c=>{c==i.id&&o++}),o>0}examAvailable(){return(!this.selectedExam.start_date||new Date>=new Date(this.selectedExam.start_date))&&(!this.selectedExam.end_date||new Date<=new Date(this.selectedExam.end_date))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["actions"]],inputs:{selectedExam:"selectedExam",examListHidden:"examListHidden"},outputs:{onSelectAction:"onSelectAction"},decls:2,vars:1,consts:[[1,"actions"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],[1,"text-secondary"]],template:function(t,i){1&t&&(e.TgZ(0,"ul",0),e.YNc(1,E,2,1,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",i.actions))},directives:[u.sg,u.O5],styles:[".actions[_ngcontent-%COMP%]{text-align:left;list-style:none;margin-bottom:0}.actions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:15px 20px 15px 4px;display:inline-block}.actions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{cursor:pointer}.actions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}"]}),n})();var x=l(7709),d=l(6782),m=l(183),O=l(1841);let p=(()=>{class n{constructor(t){this._httpClient=t}getUsers(){return this._httpClient.get(`${m.n}/exams-solutions/users`)}getExams(t){return this._httpClient.get(`${m.n}/exams-solutions/user-exams/${t}`)}getChildren(t){return this._httpClient.get(`${m.n}/exams-solutions/exam-children/${t}`)}solveExam(t){return this._httpClient.post(`${m.n}/exams-solutions`,t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(O.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function M(n,s){1&n&&(e.TgZ(0,"div",4),e._UZ(1,"i",5),e.qZA())}const Z=function(n){return{"background-image":n}};function P(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(2).onUserSelected.emit(c)}),e._UZ(2,"div",10),e.TgZ(3,"div",11),e.TgZ(4,"div",12),e._uU(5),e.qZA(),e.TgZ(6,"div",13),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(2);e.xp6(2),e.Q6J("ngStyle",e.VKq(3,Z,"url("+(t.image?t.image:i.defaultImage)+")")),e.xp6(3),e.Oqu(t.first_name+" "+t.last_name),e.xp6(2),e.Oqu(t.email)}}function T(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",6),e._uU(2,"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646"),e.qZA(),e.YNc(3,P,8,5,"div",7),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.users)}}let b=(()=>{class n{constructor(t,i){this._examSolutionClient=t,this._spinner=i,this.onUserSelected=new e.vpe,this.selectedUser=null,this.users=[],this.defaultImage="assets/images/default.jpg",this.unsubscribeAll=new x.xQ}ngOnInit(){this._spinner.show(void 0,{type:"ball-spin-clockwise",size:"medium",bdColor:"none"}),this._examSolutionClient.getUsers().pipe((0,d.R)(this.unsubscribeAll)).subscribe(t=>{this.users=t,this._spinner.hide()})}ngOnDestroy(){this.unsubscribeAll.next(),this.unsubscribeAll.complete()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p),e.Y36(_.t2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["users-list"]],outputs:{onUserSelected:"onUserSelected"},decls:4,vars:2,consts:[[1,"user-list-container","container"],[1,"row"],["class","no-users text-center",4,"ngIf"],[4,"ngIf"],[1,"no-users","text-center"],[1,"fas","fa-user"],[1,"header","text-secondary"],["class","user-wrapper col-lg-3 col-md-4",4,"ngFor","ngForOf"],[1,"user-wrapper","col-lg-3","col-md-4"],[1,"user","border","text-center",3,"click"],[1,"user-image","avatar","border","rounded-circle","m-auto",3,"ngStyle"],[1,"body"],[1,"name"],[1,"text-secondary"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,M,2,0,"div",2),e.YNc(3,T,4,1,"ng-container",3),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",0==i.users.length),e.xp6(1),e.Q6J("ngIf",i.users.length>0))},directives:[u.O5,u.sg,u.PC],styles:[".user-list-container[_ngcontent-%COMP%]{padding-top:82px}.user-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-size:11px}.user-list-container[_ngcontent-%COMP%]   .no-users[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.user-list-container[_ngcontent-%COMP%]   .no-users[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:200px;color:#dee2e6}.user-list-container[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]{padding:10px}.user-list-container[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{padding:40px;border-radius:5px}.user-list-container[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]:hover{cursor:pointer}.user-list-container[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{margin-top:15px}.user-list-container[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:bold}.user-list-container[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-repeat:none;background-size:cover}"]}),n})();function S(n,s){1&n&&(e.TgZ(0,"div",4),e._UZ(1,"i",5),e.qZA())}function w(n,s){1&n&&(e.TgZ(0,"div",8),e._uU(1,"\u0645\u062c\u0644\u062f\u0627\u062a"),e.qZA())}function q(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"div",10),e.NdJ("click",function(o){const a=e.CHM(t).$implicit;return e.oxw(2).onSelectExam(o,a)}),e.TgZ(2,"div",11),e._UZ(3,"i",12),e.qZA(),e.TgZ(4,"div",13),e._UZ(5,"i",12),e.TgZ(6,"span"),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(2);e.xp6(4),e.ekj("selected",i.selectedExam==t),e.xp6(3),e.Oqu(t.title)}}function U(n,s){if(1&n&&(e.ynx(0),e.YNc(1,w,2,0,"div",6),e.YNc(2,q,8,3,"div",7),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.folders.length>0),e.xp6(1),e.Q6J("ngForOf",t.folders)}}function y(n,s){1&n&&(e.TgZ(0,"div",8),e._uU(1,"\u0627\u0645\u062a\u062d\u0627\u0646\u0627\u062a"),e.qZA())}function F(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"div",10),e.NdJ("click",function(o){const a=e.CHM(t).$implicit;return e.oxw(2).onSelectExam(o,a)}),e.TgZ(2,"div",11),e._UZ(3,"i",14),e.qZA(),e.TgZ(4,"div",13),e._UZ(5,"i",14),e.TgZ(6,"span",15),e._uU(7),e.qZA(),e.TgZ(8,"div",16),e._uU(9),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(2);e.xp6(4),e.ekj("selected",i.selectedExam==t),e.xp6(3),e.Oqu(t.title),e.xp6(2),e.Oqu(t.exercise?"\u062a\u0645\u0631\u064a\u0646":"\u0627\u0645\u062a\u062d\u0627\u0646")}}function k(n,s){if(1&n&&(e.ynx(0),e.YNc(1,y,2,0,"div",6),e.YNc(2,F,10,4,"div",7),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.files.length>0),e.xp6(1),e.Q6J("ngForOf",t.files)}}let J=(()=>{class n{constructor(t,i){this._examSolutionClient=t,this._spinner=i,this.selectedUser=null,this.selectedAction=null,this.examListHidden=!1,this.onExamSelected=new e.vpe,this._filesTrace=new e.vpe,this.selectedExam=null,this.folders=[],this.files=[],this.filesTrace=[null],this.unsubscribeAll=new x.xQ}ngOnInit(){this._filesTrace.emit(this.filesTrace)}ngOnChanges(t){var i;if(t&&t.selectedUser&&this.selectedUser&&(this.showSpinner(),this._examSolutionClient.getExams(this.selectedUser.id).pipe((0,d.R)(this.unsubscribeAll)).subscribe(o=>{this.mapToFoldersFiles(o),this._spinner.hide()})),t&&t.selectedAction&&this.selectedAction){if("back"==this.selectedAction&&!this.examListHidden&&this.filesTrace.length>1){this.showSpinner();let o=null===(i=this.filesTrace[this.filesTrace.length-2])||void 0===i?void 0:i.id;o?this._examSolutionClient.getChildren(o).pipe((0,d.R)(this.unsubscribeAll)).subscribe(c=>{this.mapToFoldersFiles(c),this.onExamSelected.emit(this.selectedExam=null),this.filesTrace.pop(),this._spinner.hide()}):this._examSolutionClient.getExams(this.selectedUser.id).pipe((0,d.R)(this.unsubscribeAll)).subscribe(c=>{this.mapToFoldersFiles(c),this.onExamSelected.emit(this.selectedExam=null),this.filesTrace.pop(),this._spinner.hide()},c=>console.log(c))}"enter"==this.selectedAction&&this.selectedExam&&this.selectedExam.folder&&(this.showSpinner(),this._examSolutionClient.getChildren(this.selectedExam.id).pipe((0,d.R)(this.unsubscribeAll)).subscribe(o=>{this.filesTrace.push(this.selectedExam),this.mapToFoldersFiles(o),this._spinner.hide(),this.onExamSelected.emit(this.selectedExam=null)},o=>console.log(o)))}}ngOnDestroy(){this.unsubscribeAll.next(),this.unsubscribeAll.complete()}onSelectExam(t,i){t.stopPropagation(),this.onExamSelected.emit(this.selectedExam=i)}unselectExam(t){this.examListHidden||this.onExamSelected.emit(this.selectedExam=null)}mapToFoldersFiles(t){this.folders=t.filter(function(i){return i.folder}),this.files=t.filter(function(i){return!i.folder})}showSpinner(){this._spinner.show(void 0,{type:"ball-spin-clockwise",size:"medium",bdColor:"none"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p),e.Y36(_.t2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["exams-list"]],hostBindings:function(t,i){1&t&&e.NdJ("click",function(c){return i.unselectExam(c)},!1,e.evT)},inputs:{selectedUser:"selectedUser",selectedAction:"selectedAction",examListHidden:"examListHidden"},outputs:{onExamSelected:"onExamSelected",_filesTrace:"filesTrace"},features:[e.TTD],decls:5,vars:5,consts:[[1,"exams-list-container","container"],[1,"row"],["class","no-exams text-center",4,"ngIf"],[4,"ngIf"],[1,"no-exams","text-center"],[1,"fas","fa-file"],["class","header text-secondary",4,"ngIf"],["class","item-wrapper col-lg-3 col-md-4",4,"ngFor","ngForOf"],[1,"header","text-secondary"],[1,"item-wrapper","col-lg-3","col-md-4"],[1,"item","border",3,"click"],[1,"large-icon"],[1,"text-secondary","fa-solid","fa-folder"],[1,"title"],[1,"text-primary","fa-solid","fa-file"],[1,"file-text"],[1,"type","mt-2","text-secondary"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,S,2,0,"div",2),e.YNc(3,U,3,2,"ng-container",3),e.YNc(4,k,3,2,"ng-container",3),e.qZA(),e.qZA()),2&t&&(e.ekj("with-title",i.selectedExam&&i.selectedExam.title),e.xp6(2),e.Q6J("ngIf",0==i.folders.length&&0==i.files.length),e.xp6(1),e.Q6J("ngIf",i.folders.length>0),e.xp6(1),e.Q6J("ngIf",i.files.length>0))},directives:[u.O5,u.sg],styles:[".exams-list-container[_ngcontent-%COMP%]{padding-top:135px}.exams-list-container.with-title[_ngcontent-%COMP%]{padding-top:170px}.exams-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-size:11px}.exams-list-container[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]{padding:10px}.exams-list-container[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{border-radius:5px}.exams-list-container[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{cursor:pointer}.exams-list-container[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .large-icon[_ngcontent-%COMP%]{padding-bottom:25px;text-align:center;margin-top:44px}.exams-list-container[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .large-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px}.exams-list-container[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:18px 15px;margin-top:10px}.exams-list-container[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;bottom:3px}.exams-list-container[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span.file-text[_ngcontent-%COMP%]{bottom:2px}.exams-list-container[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;margin-left:10px}.exams-list-container[_ngcontent-%COMP%]   .item-wrapper[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{font-size:12px}.exams-list-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#e8e8ff}.exams-list-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#0d6efd}.exams-list-container[_ngcontent-%COMP%]   .no-exams[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.exams-list-container[_ngcontent-%COMP%]   .no-exams[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:200px;color:#dee2e6}"]}),n})();var r=l(665);function N(n,s){if(1&n&&(e.TgZ(0,"div",7),e._UZ(1,"i",10),e._uU(2),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.selectedExam.start_date?t.selectedExam.start_date.replace("T"," \u0641\u064a \u0627\u0644\u0633\u0627\u0639\u0629 "):"\u0644\u0627 \u064a\u0648\u062c\u062f \u062a\u0627\u0631\u064a\u062e \u0628\u062f\u0627\u064a\u0629"," ")}}function L(n,s){if(1&n&&(e.TgZ(0,"div",7),e._UZ(1,"i",11),e._uU(2),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.selectedExam.end_date?t.selectedExam.end_date.replace("T"," \u0641\u064a \u0627\u0644\u0633\u0627\u0639\u0629 "):"\u0644\u0627 \u064a\u0648\u062c\u062f \u062a\u0627\u0631\u064a\u062e \u0646\u0647\u0627\u064a\u0629"," ")}}function I(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",5),e._UZ(1,"i",6),e.TgZ(2,"div",7),e._uU(3,"\u0647\u0630\u0627 \u0627\u0644\u0627\u0645\u062a\u062d\u0627\u0646 \u063a\u064a\u0631 \u0645\u062a\u0627\u062d "),e.TgZ(4,"a",8),e.NdJ("click",function(o){e.CHM(t);const c=e.oxw(2);return c.showDates=!c.showDates,o.preventDefault()}),e._uU(5,"\u0645\u0634\u0627\u0647\u062f\u0629 \u0627\u0644\u062a\u0627\u0631\u064a\u062e "),e.qZA(),e.qZA(),e.YNc(6,N,3,1,"div",9),e.YNc(7,L,3,1,"div",9),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(6),e.Q6J("ngIf",t.showDates),e.xp6(1),e.Q6J("ngIf",t.showDates)}}function Q(n,s){if(1&n&&(e.TgZ(0,"div",13),e._UZ(1,"i",23),e._uU(2),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.selectedExam.start_date?t.selectedExam.start_date.replace("T"," \u0641\u064a \u0627\u0644\u0633\u0627\u0639\u0629 "):"\u0644\u0627 \u064a\u0648\u062c\u062f \u062a\u0627\u0631\u064a\u062e \u0628\u062f\u0627\u064a\u0629"," ")}}function H(n,s){if(1&n&&(e.TgZ(0,"div",13),e._UZ(1,"i",23),e._uU(2),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.selectedExam.start_date?t.selectedExam.end_date.replace("T"," \u0641\u064a \u0627\u0644\u0633\u0627\u0639\u0629 "):"\u0644\u0627\u064a\u0648\u062c\u062f \u062a\u0627\u0631\u064a\u062e \u0646\u0647\u0627\u064a\u0629"," ")}}function Y(n,s){1&n&&(e.ynx(0),e._uU(1,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u064a\u062c\u0629"),e.BQk())}function j(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",26),e.TgZ(1,"span",27),e._uU(2),e.qZA(),e.TgZ(3,"input",28),e.NdJ("click",function(){const c=e.CHM(t).index,a=e.oxw(2).index;return e.oxw(3).onRadioChoosed(a,c)})("ngModelChange",function(o){return e.CHM(t).$implicit.selected=o}),e.qZA(),e.TgZ(4,"span",29),e._uU(5),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit,i=s.index,o=e.oxw(2).index,c=e.oxw(3);e.xp6(2),e.hij("",i+1," . "),e.xp6(1),e.Q6J("name","selection-selected"+o+i)("ngModel",t.selected)("value",!0),e.xp6(1),e.ekj("text-primary",c.correctAnswer(o,i)),e.xp6(1),e.hij(" ",t.context,"")}}function D(n,s){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"div",24),e._uU(2),e.qZA(),e.YNc(3,j,6,7,"div",25),e.qZA()),2&n){const t=e.oxw(),i=t.index,o=t.$implicit;e.xp6(2),e.AsE(" (",i+1,") ",o.context," "),e.xp6(1),e.Q6J("ngForOf",o.selections)}}function $(n,s){if(1&n&&(e.ynx(0),e.YNc(1,D,4,3,"div",4),e.BQk()),2&n){const t=s.index,i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t+1==i.questionNumber)}}function z(n,s){if(1&n&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&n){const t=s.index;e.Q6J("value",t+1),e.xp6(1),e.hij(" ",t+1," ")}}function B(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.YNc(1,Q,3,1,"div",12),e.YNc(2,H,3,1,"div",12),e.TgZ(3,"div",13),e._UZ(4,"i",14),e._uU(5),e.YNc(6,Y,2,0,"ng-container",4),e.qZA(),e.TgZ(7,"form"),e.TgZ(8,"div",15),e.YNc(9,$,2,1,"ng-container",16),e.qZA(),e.TgZ(10,"div",17),e.TgZ(11,"select",18),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).questionNumber=o}),e.YNc(12,z,2,2,"option",19),e.qZA(),e.TgZ(13,"ul"),e.TgZ(14,"li"),e.TgZ(15,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).next()}),e._UZ(16,"i",21),e.qZA(),e.qZA(),e.TgZ(17,"li"),e.TgZ(18,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).prev()}),e._UZ(19,"i",22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.selectedExam.exercise),e.xp6(1),e.Q6J("ngIf",!t.selectedExam.exercise),e.xp6(3),e.hij(" ",t.selectedExam.exam_solutions?t.selectedExam.exam_solutions.result:t.result," "),e.xp6(1),e.Q6J("ngIf",!t.selectedExam.exam_solutions&&!t.result),e.xp6(3),e.Q6J("ngForOf",t.selectedExam.questions),e.xp6(2),e.Q6J("ngModel",t.questionNumber),e.xp6(1),e.Q6J("ngForOf",t.selectedExam.questions),e.xp6(3),e.Q6J("disabled",t.questionNumber==t.selectedExam.questions.length),e.xp6(3),e.Q6J("disabled",1==t.questionNumber)}}function R(n,s){if(1&n&&(e.TgZ(0,"div",2),e.YNc(1,I,8,2,"div",3),e.YNc(2,B,20,9,"ng-container",4),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.examAvailable()),e.xp6(1),e.Q6J("ngIf",t.examAvailable())}}let X=(()=>{class n{constructor(t,i){this._spinner=t,this._examSolutionClient=i,this.selectedExam=null,this.selectedAction=null,this.onExamSolved=new e.vpe,this.showDates=!1,this.showAnswer=!1,this.initSelectedExam=null,this.questionNumber=1,this.solutions=[],this.result="",this.unsubscribeAll=new x.xQ}ngOnInit(){}ngOnChanges(t){if(t&&t.selectedExam&&this.selectedExam&&!this.selectedExam.folder&&this.onEnterExam(),t&&t.selectedAction){if("enter"==this.selectedAction&&this.selectedExam&&!this.selectedExam.folder&&this.onEnterExam(),"back"==this.selectedAction&&this.selectedExam&&!this.selectedExam.folder&&(this.selectedExam.questions=this.initSelectedExam.questions),"save"==this.selectedAction&&(this.showSpinner(),this._examSolutionClient.solveExam({exam_id:this.selectedExam.id,solutions:this.getSolutions()}).pipe((0,d.R)(this.unsubscribeAll)).subscribe(i=>{this.showAnswer=!0,this._spinner.hide(),this.result=i.result,this.solutions=i.solutions,this.selectedExam.exercise||(this.selectedExam.exam_solutions={solutions:this.solutions,result:this.result}),this.initSelectedExam={questions:JSON.parse(JSON.stringify(this.selectedExam.questions))},this.onExamSolved.emit()},i=>console.log(i))),"show-answer"==this.selectedAction){if(this.showAnswer=!0,this.solutions.length>0)return;this.showSpinner(),this._examSolutionClient.solveExam({exam_id:this.selectedExam.id,solutions:this.getSolutions()}).pipe((0,d.R)(this.unsubscribeAll)).subscribe(i=>{this.solutions=i.solutions,this._spinner.hide()},i=>console.log(i))}"hide-answer"==this.selectedAction&&(this.showAnswer=!1)}}next(){this.questionNumber++}prev(){this.questionNumber--}onRadioChoosed(t,i){this.selectedExam.questions[t].selections.forEach((c,a)=>{c.selected=a==i})}correctAnswer(t,i){return!!(this.solutions.length>0&&this.showAnswer)&&this.solutions.filter(c=>c.questionIndex==t)[0].correctSelectionIndex==i}examAvailable(){return!!this.selectedExam.exam_solutions||(!this.selectedExam.start_date||new Date>=new Date(this.selectedExam.start_date))&&(!this.selectedExam.end_date||new Date<=new Date(this.selectedExam.end_date))}showSpinner(){this._spinner.show(void 0,{type:"ball-spin-clockwise",size:"medium",bdColor:"none"})}getSolutions(){let t=[];return this.selectedExam.questions.forEach((i,o)=>{i.selections.forEach((c,a)=>{c.selected&&t.push({questionIndex:o,selectedSelectionIndex:a})})}),t}onEnterExam(){this.initSelectedExam={questions:JSON.parse(JSON.stringify(this.selectedExam.questions))},this.questionNumber=1,this.showDates=!1,!this.selectedExam.exercise&&this.selectedExam.exam_solutions?(this.showAnswer=!0,this.selectedExam.exam_solutions.solutions.forEach(t=>{this.onRadioChoosed(t.questionIndex,t.selectedSelectionIndex)}),this.solutions=this.selectedExam.exam_solutions.solutions,this.result=this.selectedExam.exam_solutions.result):(this.solutions=[],this.result="")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.t2),e.Y36(p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["solution"]],inputs:{selectedExam:"selectedExam",selectedAction:"selectedAction"},outputs:{onExamSolved:"onExamSolved"},features:[e.TTD],decls:3,vars:1,consts:[[1,"exam-solution","container"],["class","row",4,"ngIf"],[1,"row"],["class","exam-unavialable text-center",4,"ngIf"],[4,"ngIf"],[1,"exam-unavialable","text-center"],[1,"main-icon","fas","fa-ban"],[1,"text-secondary","mt-1"],["href","#",3,"click"],["class","text-secondary mt-1",4,"ngIf"],[1,"text-secondary","pl-2","fas","fas","fa-calendar"],[1,"text-secondary","pl-2","fas","fa-calendar"],["class","col-md-4 mb-3",4,"ngIf"],[1,"col-md-4","mb-3"],[1,"text-secondary","fas","fa-file-lines"],[1,"col-12","p-3","border","mb-3"],[4,"ngFor","ngForOf"],[1,"questions-nav","col-12"],["name","questions-numbering",1,"questions-numbering","form-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"disabled","click"],[1,"fas","fa-angle-right"],[1,"fas","fa-angle-left"],[1,"text-secondary","fas","fa-calendar"],[1,"question","mb-3"],["class","selection mb-3",4,"ngFor","ngForOf"],[1,"selection","mb-3"],[1,"numbering"],["type","radio",3,"name","ngModel","value","click","ngModelChange"],[1,"context"],[3,"value"]],template:function(t,i){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0),e.YNc(2,R,3,2,"div",1),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",i.selectedExam&&!i.selectedExam.folder))},directives:[_.Ro,u.O5,r._Y,r.JL,r.F,u.sg,r.EJ,r.JJ,r.On,r._,r.Fj,r.YN,r.Kr],styles:[".exam-solution[_ngcontent-%COMP%]{padding-top:190px}.exam-solution[_ngcontent-%COMP%]   .questions-nav[_ngcontent-%COMP%]{text-align:left}.exam-solution[_ngcontent-%COMP%]   .questions-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0 10px 0 0;margin:0;list-style:none;display:inline-block}.exam-solution[_ngcontent-%COMP%]   .questions-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;padding-left:12px}.exam-solution[_ngcontent-%COMP%]   .questions-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0;border-style:none;background:none}.exam-solution[_ngcontent-%COMP%]   .questions-nav[_ngcontent-%COMP%]   .questions-numbering[_ngcontent-%COMP%]{width:70px;display:inline-block}.exam-solution[_ngcontent-%COMP%]   .questions-nav[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{padding-left:5px}.exam-solution[_ngcontent-%COMP%]   .question[_ngcontent-%COMP%]{font-weight:bold}.exam-solution[_ngcontent-%COMP%]   .selection[_ngcontent-%COMP%]{padding:0 5px}.exam-solution[_ngcontent-%COMP%]   .selection[_ngcontent-%COMP%]   span.context[_ngcontent-%COMP%]{margin-right:5px;position:relative;bottom:1px}.exam-solution[_ngcontent-%COMP%]   .selection[_ngcontent-%COMP%]   span.numbering[_ngcontent-%COMP%]{position:relative;bottom:2px}.exam-solution[_ngcontent-%COMP%]   .exam-unavialable[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.exam-solution[_ngcontent-%COMP%]   .exam-unavialable[_ngcontent-%COMP%]   i.main-icon[_ngcontent-%COMP%]{font-size:200px;color:#dee2e6}.exam-solution[_ngcontent-%COMP%]   .exam-unavialable[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),n})(),V=(()=>{class n{constructor(t,i){this._title=t,this.cd=i,this.selectedUser=null,this.selectedExam=null,this.selectedAction="",this.examListHidden=!1,this.filesTrace=[]}ngOnInit(){this._title.setTitle("\u062d\u0644\u0648\u0644 \u0627\u0644\u0627\u0645\u062a\u062d\u0627\u0646\u0627\u062a")}onActionSelected(t){this.selectedAction=t,"enter"==t&&this.selectedExam&&!this.selectedExam.folder&&(this.examListHidden=!0),setTimeout(()=>{"back"==t&&(1!=this.filesTrace.length||this.examListHidden?this.examListHidden&&(this.examListHidden=!1):this.selectedUser=null)},1)}onExamSelected(t){this.selectedExam=t,this.selectedAction="",this.cd.detectChanges()}onUserSelected(t){this.selectedUser=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.Dx),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-exam-solution"]],decls:11,vars:18,consts:[[1,"exam-solution-container"],[1,"fixed-section"],["currentPage","exam-solution"],[1,"border-bottom"],[1,"text-secondary","exam-title"],[3,"examListHidden","selectedExam","onSelectAction"],[3,"onUserSelected"],[3,"selectedAction","selectedUser","examListHidden","filesTrace","onExamSelected"],[3,"selectedAction","selectedExam","onExamSolved"]],template:function(t,i){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e._UZ(3,"navbar",2),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"actions",5),e.NdJ("onSelectAction",function(c){return i.onActionSelected(c)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"users-list",6),e.NdJ("onUserSelected",function(c){return i.onUserSelected(c)}),e.qZA(),e.TgZ(9,"exams-list",7),e.NdJ("filesTrace",function(c){return i.filesTrace=c})("onExamSelected",function(c){return i.onExamSelected(c)}),e.qZA(),e.TgZ(10,"solution",8),e.NdJ("onExamSolved",function(){return i.selectedAction=""}),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.ekj("hidden",!i.selectedUser),e.xp6(1),e.ekj("hidden",!i.selectedExam||!i.selectedExam.title),e.xp6(1),e.hij(" ",null==i.selectedExam?null:i.selectedExam.title," "),e.xp6(1),e.Q6J("examListHidden",i.examListHidden)("selectedExam",i.selectedExam),e.xp6(1),e.ekj("hidden",i.selectedUser),e.xp6(1),e.ekj("hidden",!i.selectedUser||i.examListHidden),e.Q6J("selectedAction",i.selectedAction)("selectedUser",i.selectedUser)("examListHidden",i.examListHidden),e.xp6(1),e.ekj("hidden",!i.selectedUser||!i.examListHidden),e.Q6J("selectedAction",i.selectedAction)("selectedExam",i.selectedExam))},directives:[_.Ro,C.S,A,b,J,X],styles:[".exam-solution-container[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}.exam-solution-container[_ngcontent-%COMP%]   .fixed-section[_ngcontent-%COMP%]{position:fixed;background:white;width:100%;z-index:999}.exam-solution-container[_ngcontent-%COMP%]   .exam-title[_ngcontent-%COMP%]{padding:15px 18px 0 0;font-weight:bold}"]}),n})();var K=l(6653),G=l(7643);const W=[{path:"",component:V}];let ee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.ez,K.Bz.forChild(W),G.W,_.ef,r.u5]]}),n})()}}]);